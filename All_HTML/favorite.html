<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Your Favorite Books</title>

<!-- Bootstrap 5 CSS -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

<!-- Font Awesome -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
  integrity="sha512-dyZ88n1B+1rQzlj7L7UAkuzMmj5V0zswq+QJ/SF5M6IGZf/nQ9efjqep3zrbZWOjD4Byyj0FZoxZVJoE63w1Rg=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>

<style>
  body {
    margin: 0;
    background-color: #0B0804;
    color: #d6aa68;
    font-family: Arial, sans-serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  main {
    flex: 1 0 auto;
    margin-top: 80px; /* space for fixed navbar */
    margin-bottom: 80px; /* space for footer */
  }
  header, .search-section {
    padding: 4rem 1rem 3rem;
    text-align: center;
    background-color: #0B0804;
    color: #d6aa68;
  }
  h1 {
    font-size: 2.5rem;
    margin-bottom: 2rem;
    color: #d6aa68;
  }
  .search-container {
    max-width: 700px;
    margin: 0 auto;
    position: relative;
  }
  input[type="search"] {
    width: 100%;
    padding: 0.6rem 1rem 0.6rem 2.8rem;
    font-size: 1rem;
    border-radius: 12px;
    border: none;
    outline: none;
    background-color: #f1c9a9;
    color: #7a5a43;
    font-weight: 500;
  }
  input[type="search"]::placeholder {
    color: #7a5a43;
  }
  .search-icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    stroke: #7a5a43;
    width: 20px;
    height: 20px;
    pointer-events: none;
  }
  .container {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 0 1rem;
  }
  .book-list > div {
    background: #2b241c;
    padding: 1rem 1.5rem 1.5rem 1.5rem;
    height: 450px;
    margin-bottom: 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    position: relative;
    gap: 1.5rem;
    color: #d6aa68;
    min-height: 150px;
  }
  .book-list > div:hover {
    background-color: #3b3328;
  }
  .book-image-container {
    width: 280px;
    height: 400px;
    background-color: white;
    border-radius: 4px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
  }
  .book-image {
    height: 100%;
    width: auto;
    max-width: 100%;
    object-fit: contain;
  }
  .book-info {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-right: 160px;
    position: relative;
    gap: 0.8rem;
  }
  .book-title {
    font-weight: bold;
    font-size: 1.7rem;
    margin: 0 0 0.25rem 0;
    color: #F9C172;
  }
  .book-author {
    font-size: 1rem;
    margin: 0 0 0.5rem 0;
    color: #c2a058;
  }
  .book-description {
    font-size: 1.2rem;
    color: #c4ad76;
    line-height: 1.6;
    text-align: justify;
  }
  .right-controls {
    position: absolute;
    bottom: 15px;
    right: 15px;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 6px;
    width: max-content;
    min-width: 140px;
  }
  .button-row {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  .action-btn, .favorite-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0;
    width: 28px;
    height: 28px;
    stroke: #d6aa68;
    fill: none;
    transition: fill 0.3s, stroke 0.3s;
  }
  .action-btn:hover, .favorite-btn:hover {
    stroke: #F9C172;
    fill: #F9C172;
  }
  .favorite-icon {
    fill: transparent;
  }
  .favorite-icon.favorited {
    fill: #d6aa68;
  }
  .rating-stars {
    display: inline-flex;
    gap: 3px;
  }
  .star {
    width: 18px;
    height: 18px;
    fill: #d6aa68;
    stroke: #d6aa68;
  }
  .star.empty {
    fill: transparent;
  }
  .pagination {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 3rem;
  }
  .pagination button {
    background: #3b3328;
    border: none;
    padding: 0.5rem 0.8rem;
    border-radius: 4px;
    color: #d6aa68;
    cursor: pointer;
    font-weight: bold;
    font-size: 1rem;
  }
  .pagination button:hover:not(.active) {
    background: #4b4538;
  }
  .pagination button.active {
    background: #d6aa68;
    color: #2b241c;
    cursor: default;
  }
  .pagination .arrow-btn {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .arrow-icon {
    stroke: #d6aa68;
    width: 20px;
    height: 20px;
  }

  /* Footer styles */
  footer.custom-footer {
    background-color: #2b241c;
    color: #d6aa68;
    padding: 2rem 0;
  }
  footer.custom-footer .footer-title {
    font-weight: bold;
    margin-bottom: 1rem;
  }
  footer.custom-footer .footer-links a {
    display: block;
    color: #d6aa68;
    margin-bottom: 0.5rem;
    text-decoration: none;
  }
  footer.custom-footer .footer-links a:hover {
    text-decoration: underline;
  }
  footer.custom-footer .footer-bottom {
    margin-top: 2rem;
    border-top: 1px solid #4b4538;
    padding-top: 1rem;
  }
</style>
</head>
<body>

<!-- Navbar Start -->
<nav class="navbar navbar-expand-lg navbar-light nav-bg fixed-top" style="background-color: none;">
  <!-- Logo -->
  <div class="logo-container d-flex align-items-center gap-3 position-relative z-index-1 px-3">
    <div
      class="logo-icon rounded-circle d-flex align-items-center justify-content-center"
      style="
        width: 37.5px;
        height: 37.5px;
        background: linear-gradient(135deg, #c17b36 0%, #f9c172 100%);
        box-shadow: 0 4px 15px rgba(193, 123, 54, 0.3); ">
      <div
        class="book-icon"
        style="width: 25px; height: 20px; background-color: #0b0804; transform: perspective(100px) rotateY(-15deg);">
      </div>
    </div>
    <div class="logo-text fs-3 fw-bold text-warning">NextChapter</div>
  </div>

  <!-- Toggler -->
  <button
    class="navbar-toggler nav-cr"
    type="button"
    data-bs-toggle="collapse"
    data-bs-target="#navbarNav"
    aria-controls="navbarNav"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="menu-icon" aria-hidden="true">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </span>
  </button>

  <!-- Collapsible nav links -->
  <div class="collapse navbar-collapse nav-bg" id="navbarNav">
    <ul class="navbar-nav ms-auto align-items-center">
      <li class="nav-item me-4">
        <a class="nav-link all-nav text-warning" href="./home.php">Home</a>
      </li>
      <li class="nav-item me-4">
        <a class="nav-link all-nav text-warning" href="recommendations.html">Recommendation</a>
      </li>
      <li class="nav-item me-custom me-4">
        <a class="nav-link all-nav text-warning" href="./about.html">About</a>
      </li>
      <li class="nav-item me-4">
        <button
          class="btn btn-link nav-link p-0 text-warning"
          onclick="window.location.href='profile.php'"
          aria-label="Go to profile"
        >
          <i class="fas fa-user-circle fa-lg all-nav"></i>
        </button>
      </li>
      <li class="nav-item dropdown me-4">
        <button
          class="btn nav-link dropdown-toggle all-nav p-0 text-warning"
          id="profileDropdown"
          data-bs-toggle="dropdown"
          aria-expanded="false"
          aria-label="User menu"
        >
          <i class="bi bi-person fs-5"></i>
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
          <li>
            <a class="dropdown-item" href="profile.html">
              <img src="./assets/icons/user.png" class="me-2" alt="" />My profile
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="#">
              <img src="./assets/icons/edit.png" class="me-2" alt="" />Edit profile
            </a>
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li>
            <a class="dropdown-item" href="../logout.php">
              <img src="./assets/icons/log-out.png" class="me-2" alt="" />Logout
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</nav>
<!-- Navbar End -->

<main>
  <header>
    <h1>Your Favorite Books</h1>
    <div class="search-container">
      <input id="searchInput" type="search" placeholder="Find book you like" />
      <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
    </div>
  </header>
  <div class="container">
    <div id="bookList" class="book-list"></div>
    <div class="pagination" id="pagination"></div>
  </div>
</main>

<!-- Footer -->
<footer class="custom-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-4 mb-4 mb-md-0">
        <h4 class="footer-title">About Us</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris. Vivamus hendrerit arcu sed erat molestie vehicula.</p>
      </div>
      
      <div class="col-md-2 mb-4 mb-md-0">
        <h4 class="footer-title">Quick Links</h4>
        <div class="footer-links">
          <a href="#">Home</a>
          <a href="#">About</a>
        </div>
      </div>
      
      <div class="col-md-3 mb-4 mb-md-0 d-flex flex-column align-items-start">
        <h4 class="footer-title">LinkedIn</h4>
        <div class="footer-links">
          <a href="https://www.linkedin.com/in/malek-alhwaide/" target="_blank">Malek Alhwaide</a>
          <a href="https://www.linkedin.com/in/qusai-kanaan/"  target="_blank">Qusai Kanaan</a>
          <a href="        "     target="_blank">      </a>
          <a href="         "   target="_blank">       </a>
        </div>
      </div>
    </div>
    
    <div class="row footer-bottom">
      <div class="col-md-12 text-center">
        <p class="mb-0">&copy; 2025</p>
      </div>
    </div>
  </div>
</footer>

<!-- Bootstrap 5 JS Bundle (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  const booksPerPage = 4;
  let currentPage = 1;
  let books = [];
  let searchTerm = 'classic';
  let favorites = new Set();

  const bookListEl = document.getElementById('bookList');
  const paginationEl = document.getElementById('pagination');
  const searchInput = document.getElementById('searchInput');

  async function fetchBooks(query) {
    const maxResults = 40;
    const url = `https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(query)}&maxResults=${maxResults}`;
    try {
      const response = await fetch(url);
      const data = await response.json();
      if (data.items) {
        return data.items.map(item => {
          const volume = item.volumeInfo;
          return {
            id: item.id,
            title: volume.title || "No title",
            author: volume.authors ? volume.authors.join(', ') : "Unknown author",
            favorite: favorites.has(item.id),
            image: volume.imageLinks ? volume.imageLinks.thumbnail : '',
            rating: volume.averageRating ? Math.round(volume.averageRating) : 0,
            description: volume.description ? volume.description.replace(/(<([^>]+)>)/gi, "").substring(0, 300) + (volume.description.length > 300 ? "..." : "") : "No description available."
          };
        });
      } else {
        return [];
      }
    } catch (error) {
      console.error("Failed to fetch books:", error);
      return [];
    }
  }

  function renderBooks() {
    const totalPages = Math.ceil(books.length / booksPerPage);
    if (currentPage > totalPages) currentPage = totalPages || 1;

    const start = (currentPage - 1) * booksPerPage;
    const currentBooks = books.slice(start, start + booksPerPage);

    bookListEl.innerHTML = '';

    if (currentBooks.length === 0) {
      bookListEl.textContent = "No books found.";
      paginationEl.innerHTML = '';
      return;
    }

    currentBooks.forEach((book) => {
      const bookDiv = document.createElement('div');
      bookDiv.className = 'book-item';

      const imgContainer = document.createElement('div');
      imgContainer.className = 'book-image-container';
      const img = document.createElement('img');
      img.src = book.image || 'https://via.placeholder.com/120x150?text=No+Image';
      img.alt = book.title;
      img.className = 'book-image';

      imgContainer.appendChild(img);

      const infoDiv = document.createElement('div');
      infoDiv.className = 'book-info';
      infoDiv.style.cursor = 'pointer';

      const title = document.createElement('h2');
      title.className = 'book-title';
      title.textContent = book.title;

      const author = document.createElement('p');
      author.className = 'book-author';
      author.textContent = book.author;

      const description = document.createElement('p');
      description.className = 'book-description';
      description.textContent = book.description;

      const headerGroup = document.createElement('div');
      headerGroup.appendChild(title);
      headerGroup.appendChild(author);

      const descWrapper = document.createElement('div');
      descWrapper.style.flexGrow = '1';
      descWrapper.style.display = 'flex';
      descWrapper.style.alignItems = 'center';
      descWrapper.appendChild(description);

      infoDiv.appendChild(headerGroup);
      infoDiv.appendChild(descWrapper);

      const rightControls = document.createElement('div');
      rightControls.className = 'right-controls';

      bookDiv.appendChild(imgContainer);
      bookDiv.appendChild(infoDiv);
      bookDiv.appendChild(rightControls);

      bookListEl.appendChild(bookDiv);
    });

    renderPagination(totalPages);
  }

  function renderPagination(totalPages) {
    paginationEl.innerHTML = '';
    if (totalPages <= 1) return;

    function createPageBtn(page, label = page) {
      const btn = document.createElement('button');
      btn.textContent = label;
      if (page === currentPage) btn.classList.add('active');
      btn.addEventListener('click', () => {
        if (page !== currentPage) {
          currentPage = page;
          renderBooks();
        }
      });
      return btn;
    }

    if (currentPage > 1) {
      const prevBtn = document.createElement('button');
      prevBtn.classList.add('arrow-btn');
      prevBtn.innerHTML = `<svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>`;
      prevBtn.addEventListener('click', () => {
        if (currentPage > 1) {
          currentPage--;
          renderBooks();
        }
      });
      paginationEl.appendChild(prevBtn);
    }

    for (let i = 1; i <= totalPages; i++) {
      paginationEl.appendChild(createPageBtn(i));
    }

    if (currentPage < totalPages) {
      const nextBtn = document.createElement('button');
      nextBtn.classList.add('arrow-btn');
      nextBtn.innerHTML = `<svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>`;
      nextBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
          currentPage++;
          renderBooks();
        }
      });
      paginationEl.appendChild(nextBtn);
    }
  }

  searchInput.addEventListener('input', (e) => {
    searchTerm = e.target.value.trim() || 'classic';
    currentPage = 1;
    fetchBooks(searchTerm).then(fetchedBooks => {
      books = fetchedBooks;
      renderBooks();
    });
  });

  fetchBooks(searchTerm).then(fetchedBooks => {
    books = fetchedBooks;
    renderBooks();
  });
</script>

</body>
</html>
